{"openapi":"3.1.0","info":{"title":"Monarch API: Train, Fine-Tune, and Host AI Models","description":"Monarch is a unified API for training, fine-tuning, and hosting AI models on the best GPUs worldwide.\n\n**Key Features:**\n- Train custom AI models with a single API call\n- Deploy and run inference on your models\n- Secure Google authentication and API key management\n- Comprehensive usage tracking and billing\n\n**How It Works:**\n1. Sign in with Google to get your API key\n2. Train, deploy, and use AI models via API calls\n3. Monitor usage and manage billing through the unified platform","version":"0.1.0"},"paths":{"/v1/train/":{"post":{"summary":"Create Training Job","description":"Create a new training job","operationId":"create_training_job_v1_train__post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TrainingConfig"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/train/{job_id}":{"get":{"summary":"Get Training Job","description":"Get details of a training job","operationId":"get_training_job_v1_train__job_id__get","parameters":[{"name":"job_id","in":"path","required":true,"schema":{"type":"string","title":"Job Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"summary":"Cancel Training Job","description":"Cancel a training job","operationId":"cancel_training_job_v1_train__job_id__delete","parameters":[{"name":"job_id","in":"path","required":true,"schema":{"type":"string","title":"Job Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/inference/":{"post":{"summary":"Run Inference","description":"Run inference on a model","operationId":"run_inference_v1_inference__post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/InferenceRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/inference/batch":{"post":{"summary":"Run Batch Inference","description":"Run batch inference on a model","operationId":"run_batch_inference_v1_inference_batch_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BatchInferenceRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/models/":{"get":{"summary":"List Models","description":"List available models for the user","operationId":"list_models_v1_models__get","parameters":[{"name":"status","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by model status","title":"Status"},"description":"Filter by model status"},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","description":"Max number of models to return","default":100,"title":"Limit"},"description":"Max number of models to return"},{"name":"offset","in":"query","required":false,"schema":{"type":"integer","description":"Pagination offset","default":0,"title":"Offset"},"description":"Pagination offset"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/models/{model_id}":{"get":{"summary":"Get Model","description":"Get model details","operationId":"get_model_v1_models__model_id__get","parameters":[{"name":"model_id","in":"path","required":true,"schema":{"type":"string","title":"Model Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"summary":"Delete Model","description":"Delete a model","operationId":"delete_model_v1_models__model_id__delete","parameters":[{"name":"model_id","in":"path","required":true,"schema":{"type":"string","title":"Model Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/models/{model_id}/deploy":{"post":{"summary":"Deploy Model","description":"Deploy a model for inference","operationId":"deploy_model_v1_models__model_id__deploy_post","parameters":[{"name":"model_id","in":"path","required":true,"schema":{"type":"string","title":"Model Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/models/{model_id}/deployment":{"delete":{"summary":"Undeploy Model","description":"Undeploy a model","operationId":"undeploy_model_v1_models__model_id__deployment_delete","parameters":[{"name":"model_id","in":"path","required":true,"schema":{"type":"string","title":"Model Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/gpus":{"get":{"tags":["gpus"],"summary":"Get Available Gpus","description":"Get list of available GPUs across providers with their specs and pricing.\n\nThis endpoint fetches real-time GPU availability and pricing from cloud platforms.\nIt lists GPUs from AWS, GCP, and Azure with their specifications and current pricing.\nLogs every snapshot to Firestore.","operationId":"get_available_gpus_v1_gpus_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GPUResponse"}}}}}}},"/oauth/google/login":{"get":{"tags":["oauth"],"summary":"Google Login","description":"Redirect user to Google OAuth login","operationId":"google_login_oauth_google_login_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/oauth/google/callback":{"get":{"tags":["oauth"],"summary":"Google Callback","description":"Handle Google OAuth callback, create user, return API key","operationId":"google_callback_oauth_google_callback_get","parameters":[{"name":"code","in":"query","required":true,"schema":{"type":"string","title":"Code"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/health":{"get":{"summary":"Health Check","operationId":"health_check_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}}},"components":{"schemas":{"BatchInferenceRequest":{"properties":{"model_id":{"type":"string","title":"Model Id","description":"ID of the model to query"},"batch":{"items":{},"type":"array","title":"Batch","description":"Batch of inputs"},"parameters":{"additionalProperties":true,"type":"object","title":"Parameters","description":"Inference parameters"}},"type":"object","required":["model_id","batch"],"title":"BatchInferenceRequest","description":"Request for batch inference"},"GPUInfo":{"properties":{"name":{"type":"string","title":"Name"},"provider":{"type":"string","title":"Provider"},"specs":{"additionalProperties":true,"type":"object","title":"Specs"},"pricing":{"additionalProperties":{"anyOf":[{"type":"number"},{"type":"string"},{"type":"null"}]},"type":"object","title":"Pricing"}},"type":"object","required":["name","provider","specs","pricing"],"title":"GPUInfo"},"GPUResponse":{"properties":{"status":{"type":"string","title":"Status","default":"ok"},"message":{"type":"string","title":"Message","default":""},"data":{"items":{"$ref":"#/components/schemas/GPUInfo"},"type":"array","title":"Data","default":[]}},"type":"object","title":"GPUResponse"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"InferenceRequest":{"properties":{"model_id":{"type":"string","title":"Model Id","description":"ID of the model to query"},"inputs":{"title":"Inputs","description":"Input for the model"},"parameters":{"additionalProperties":true,"type":"object","title":"Parameters","description":"Inference parameters"}},"type":"object","required":["model_id","inputs"],"title":"InferenceRequest","description":"Request for model inference"},"TrainingConfig":{"properties":{"model_id":{"type":"string","title":"Model Id","description":"Base model to fine-tune"},"dataset_url":{"type":"string","title":"Dataset Url","description":"URL to the dataset"},"parameters":{"additionalProperties":true,"type":"object","title":"Parameters","description":"Training parameters"},"epochs":{"type":"integer","title":"Epochs","description":"Number of training epochs","default":3},"batch_size":{"type":"integer","title":"Batch Size","description":"Batch size for training","default":16},"learning_rate":{"type":"number","title":"Learning Rate","description":"Learning rate","default":2e-05},"gpu_type":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Gpu Type","description":"Specific GPU type requested"},"priority":{"type":"string","title":"Priority","description":"Job priority (low, normal, high)","default":"normal"}},"type":"object","required":["model_id","dataset_url"],"title":"TrainingConfig","description":"Configuration for model training"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"}}}}